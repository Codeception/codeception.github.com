<!DOCTYPE HTML>
<html lang="en">
<head>
	<title>Codeception</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=792, user-scalable=no">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<link rel="stylesheet" href="shower/themes/ribbon/styles/screen.css">
	<!--
		To apply styles to the certain slides
		set slide ID to get needed elements
		-->
	<style>
	.slide {
		background: url(pictures/devconf.png) #fff;
	}
		.slide h2 {
			margin-top: -40px;
			color: #fff;
			margin-bottom: 80px;			
		}
		.slide .section{
			margin-top: 50px;
		}
		.slide .section h2 {
			color: #BF1E2E;
			margin-top: 50px;
		}

		body .slide:after {
			display: none;
		}

		#Cover h2 {			
			margin:30px 0 0;
			color:#FFF;
			text-align:center;
			font-size:70px;
			}
		#Cover p {
			margin:10px 0 0;
			text-align:center;
			color:#FFF;
			font-style:italic;
			font-size:20px;
			}
			#Cover p a {
				color:#FFF;
				}
		#Picture h2 {
			color:#FFF;
			}
		#SeeMore h2 {
			font-size:100px
			}
		#SeeMore img {
			width:0.72em;
			height:0.72em;
			}
	</style>
</head>
<body class="list">
	<header class="caption">
		<h1>Codeception - тестируем по-человечески</h1>
		<p>Михаил Боднарчук</p>
	</header>
	<section class="slide cover" id="Cover"><div>
		<h2>Codeception - тестируем по-человечески</h2>
		<p>Михаил Боднарчук</p>
		<img src="pictures/devconf_base.png" alt="" style="width: 100%;">
		<!-- photo by John Carey, fiftyfootshadows.net -->
	</div></section>

	<section class="slide">
		<div>
		<h2>Oбо мне</h2>
		<img src="pictures/pepelac.jpg" alt="me" style="float: right; width: 40%;">
		<ol>
			<li>Веб разработчик из Киева</li>
			<li>Пишу на PHP, Ruby, CoffeeScript</li>
			<li>Разрабатываю open-source продукты: Codeception, Robo, AspectMock</li>
			<li><strike>По выходным летаю на пепелаце</strike> (сломался)</li>
		</ol>
		</div>
	</section>
	<section class="slide">

		<div>
		<h2>О тестировании</h2>
			<ol>
				<li>Стоит ли вообще тестировать?</li>
				<li>Что это за страшные слова: TDD, BDD, Test Doubles, Story BDD, Spec BDD, Stubs, Mocks, Spies, Fakes, Fixtures? </li>
				<li>С чего начать тестирование?</li>
			</ol>
		</div>
	</section>
	<section class="slide">
		<div>
			<h2>Начинают писать тесты</h2>
			<ol>
	          <li>Когда после деплоя ничего не работает</li>
	          <li>Когда после мерджа всё поломалось</li>
	          <li>Когда надоело проверять API вручную</li>
			  <li>Когда постоянно приходится всё проверять вручную</li>	
			</ol>
		</div>
	</section>

    <section class="slide">
    	<div>
    		<h2>Подходы к тестированию</h2>
    		<img src="pictures/tdd.jpg" alt="" style="float: right; width: 40%;" >
    		<ol>
    			<li><b>Прагаматический подход</b> - Test After</li>
    			<li><b>TDD</b> - Test First (Is TDD Dead?)</li>
    			<li><b>BDD</b> - улучшенный TDD
					<ul>
						<li>Spec BDD - внутренние спецификации</li>
						<li>Story BDD - требования заказчика</li>
					</ul>
    			</li>
    		</ol>
    	</div>
    </section>
      	
    <section class="slide">
    	<div>
    		<h2>Best Practices</h2>
    		<ol>
    			<li>Тест состоит из <b>условия</b>, <b>действия</b>, <b>проверки</b></li>
    			<li>Отделить дополнительный код от теста</li>
    			<li>Отделить конфигурацию от теста</li>
    			<li>Делать тесты читабельными (и компактными)</li>
    		</ol>
    	</div>
    </section>

	<section class="slide">
		<div>
			<h2>С чего начать тестирование?</h2>
			<ul>
				<li class="next">Установить PHPUnit. Найти самый простой изолированый и редко использующийся класс. Написать на него тест.</li>
				<li class="next">Установить Codeception. Написать тест проверяющий работу приложения вцелом</li>
			</ul>
		</div>

	</section>

	

	<section class="slide">
		<div>
		<h2>O Codeception</h2>
		<ol>
			<li>Современный фреймворк для тестирования в PHP</li>
			<li>Прост в установке, продвигает best practices тестирования</li>
			<li>Поддерживает приемочные, функциональные и юнит тесты</li>
			<li>Более 20 модулей, включая <strong>Selenium, Symfony, Yii, Laravel...</strong></li>
			<li>Основан на <strong>PHPUnit, Symfony Components, Guzzle</strong></li>
			<li><em><a href="https://codeception.com">https://codeception.com</a></em></li>
		</ol>
		</div>
	</section>
	<section class="slide">
		<div>
			<h2>Немножко истории...</h2>
			<ul>				
				<li>Проект назывался TestGuy</li>
				<li>За основу был взят PHPUnit 3.5</li>
				<li>Плагин для symfony 1.4</li>
				<li>Первый релиз в январе 2012</li>
				<li>...всё это время я почти ничего не знал про тестирование</li>
			</ul>	
		</div>
	</section>
	<section class="slide">
		<div>
			<h2>Пирамида тестирования</h2>
			<p>
				<img src="pictures/pyramid.png" alt="pyramid" />
			</p>			
		</div>
	</section>


	<section class="slide">
		<div class="section">			
		<h2><strong>&#10003; Приемочные тесты</strong></h2>
		<h2>Функциональные тесты</h2>
		<h2>Юнит тесты</h2>
		</div>
	</section>

	<section class="slide">
		<div>
			
		<h2>Простой тест</h2>
		<pre>
					<code>$I = new AcceptanceTester($scenario);</code>
					<code>$I->amOnPage('/login');</code>
					<code>$I->fillField('email','myemail@test.com');</code>
					<code>$I->fillField('password','mysecurepassword');</code>
					<code>$I->click('#loginForm input[type=submit]');</code>
					<code>$I->seeCurrentUrlIs('/dashboard');</code>
					<code>$I->see('Welcome back','.notice');</code>
			
		</pre>
		</div>
	</section>

	<section class="slide">
		<div>			
		<h2>Читабельные тесты</h2>
		<div><small>мысленно уберем все спецсимволы...</small></div>
		<pre>			
				<code>I = new AcceptanceTester</code>
				<code>I amOnPage '/login'</code>
				<code>I fillField 'email','myemail@test.com'</code>
				<code>I fillField 'password','mysecurepassword'</code>
				<code>I click '#loginForm input[type=submit]'</code>
				<code>I seeCurrentUrlIs '/dashboard'</code>
				<code>I see 'Welcome back', '.notice'</code>		
		</pre>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Автодополнение</h2>
			<img src="pictures/autocomplete.png" alt="" />
		</div>
	</section>

	<section class="slide">
		<div>
			
		<h2>Умная работа с локаторами</h2>
		<pre>

					<code>$I->click(<mark>'Login'</mark>);</code>
					<code>$I->click(<mark>'#loginForm input[type=submit]'</mark>);</code>
					<code>$I->click(<mark>'./*[@id='loginForm']/input[@type='submit']'</mark>);</code>
					<code>$I->click(<mark>['name' => 'submit']</mark>);</code>
			
		</pre>
		</div>
	</section>

	<section class="slide">
		<div>
			
		<h2>PageObjects</h2>
		<pre>
			<code>$I->click(<mark>LoginPage::$submitButton</mark>);</code>			
			<code>LoginPage::of($I)</code>			
			<code>&nbsp;&nbsp;->login('myemail@test.com','mysecurepassword');</code>
		</pre>
		</div>
	</section>


	<section class="slide">
		<div>
			<h2>StepObjects</h2>
			<pre>
				<code>$I = new AcceptanceTester\<mark>UserSteps</mark>($scenario);</code>
				<code><mark>$I->logIn</mark>('myemail', 'mysecurepassword');</code>
				<code>$I->see('Welcome back', '.notice');</code>
			</pre>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Единое API</h2>
			<ul>
				<li>Selenium WebDriver</li>
				<li>PhpBrowser</li>
				<li>Функциональные тесты РНР фреймворков</li>
			</ul>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Selenium WebDriver</h2>
			<ul>
				<li>Современный клиент WebDriver для РНР</li>
				<li>Разрабатывается в Facebook</li>
				<li>Максимально близко к официальным биндингам Java</li>
				<li><a href="https://github.com/facebook/php-webdriver">github.com/<mark>facebook</mark>/php-webdriver</a></li>
			</ul>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Расширяем возможности</h2>
			<pre>
				<code>function clickGreenButton() {</code>
				<code>&nbsp;&nbsp;$this->webDriver->findElement(</code>
        <code>&nbsp;&nbsp;&nbsp;&nbsp;WebDriverBy::cssSelector('#green button')</code>
        <code>&nbsp;&nbsp;)->click();;</code>
        <code>}</code>
        <code>// в тесте:</code>
        <code>$I->clickGreenButton();</code>
			</pre>
		</div>
	</section>	

	<section class="slide">
		<div>
			<h2>Environments</h2>
			<ul>
				<li>Последовательный запуск тестов с различной конфигурацией</li>
				<li>Например, <mark>тестирование в различных браузерах</mark></li>
				<li>Например, тестирование на разных СУБД</li>
			</ul>
		</div>
	</section>


	<section class="slide">
		<div class="section">			
		<h2><strong> Приемочные тесты</strong></h2>
		<h2>&#10003; Функциональные тесты</h2>
		<h2>Юнит тесты</h2>
		</div>
	</section>

	<section class="slide">
		<div>
		<h2>Простой тест</h2>
		<pre>
					<code>$I = new FunctionalTester($scenario);</code>
					<code>$I->amOnPage('/login');</code>
					<code>$I->fillField('email','myemail@test.com');</code>
					<code>$I->fillField('password','mysecurepassword');</code>
					<code>$I->click('#loginForm input[type=submit]');</code>
					<code>$I->seeCurrentUrlIs('/dashboard');</code>
					<code>$I->see('Welcome back','.notice');</code>			
					<code>$I-><mark>seeInSession</mark>('user_name','me');</code>
		</pre>
		</div>
	</section>

	<section  class="slide">
		<div>
		<h2>Фреймворки</h2>
		<ul>
			<li>Symfony 2 + Doctrine 2</li>
			<li>Yii, Yii2</li>
			<li>Laravel</li>
			<li>Zend Framework 1,2</li>
			<li>Phalcon</li>
		</ul>
		</div>
	</section>


	<section class="slide">
		<div>
			<h2>Веб сервисы</h2>
			<pre>
				<code>$I = new ApiTester($scenario);</code>
				<code>$I->wantTo('get pending articles via REST API');</code>
				<code>$I->amHttpAuthenticated('service_user','123456');</code>
				<code>$I->sendGET('articles', ['type' => 'pending']);</code>
				<code>$I->seeResponseCodeIs(200);</code>
				<code>$I->seeResponseIsJson();</code>
				<code>$I->seeResponseContains('article: { title: "Article 1"}');</code>
			</pre>
		</div>
	</section>

	<section class="slide">
		<div class="section">			
		<h2><strong> Приемочные тесты</strong></h2>
		<h2>Функциональные тесты</h2>
		<h2>&#10003; Юнит тесты</h2>
		</div>
	</section>


	<section class="slide">
		<div>
			<h2>Юнит тесты</h2>
			<ul>
				<li>Нативная поддержка тестов PHPUnit</li>
				<li>Дополнительные хэлперы для работы с БД</li>				
				<li>Запуск вместе с функциональными и приемочными</li>
			</ul>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Юнит тест</h2>
			<pre>
				<code>function testSavingUser() {</code>
				<code>    $user = new User();</code>
				<code>    $user->setName('Miles');</code>
				<code>    $user->save();</code>
				<code>    $this->assertEquals('Miles', $user->getFullName());</code>
				<code>    $this->tester-><mark>seeInDatabase</mark>('users',['name' => 'Miles']);</code>
				<code>}</code>			
			</pre>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Codeception\AspectMock</h2>
			<pre>				
				<code>$this->assertEquals('users', User::tableName());</code>
				<code>test::double('User', ['tableName' => 'fake_users']);</code>
				<code>$this->assertEquals('fake_users', User::tableName());</code>
			</pre>
			<div><a href="https://github.com/Codeception/AspectMock">github.com/Codeception/AspectMock</a></div>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Specify + Verify</h2>
			<pre>
        	<code>$this->specify("returns full name", function() {</code>
            <code>    $this->user->firstName = 'Michael';</code>
            <code>    $this->user->lastName = 'Bodnarchuk';</code>
            <code>    verify($this->user->getFullName())</code>
            <code>	      ->equals('Michael Bodnarchuk');</code>
        	<code>});</code>
			</pre>
		<div><a href="https://github.com/Codeception/Specify">github.com/Codeception/Specify</a> + <a href="https://github.com/Codeception/Verify">github.com/Codeception/Verify</a></div>
		
		</div>
	</section>

	<section class="slide">
		<div class="section">			
		<h2>Общие возможности</h2>
		</div>
	</section>

	  <section class="slide">
	    <div>
	      <h2>Code Coverage</h2>
	      <p>
	      	<img src="pictures/coverage.png" alt="">
	      </p>
	    </div>
	  </section>    

	  <section class="slide">
	    <div>
	      <h2>Отладочная информация</h2>
	      <div><img src="pictures/debug.png" alt=""></div>
	      <ul>
	      	<li>логирование</li>
	      	<li>скриншот страницы перед фейлом</li>	      	
	      </ul>
	    </div>
	  </section>    	  

	  <section class="slide">
	  <div>
	  	<h2>Документация</h2>
	  	<ul>
	  		<li>Обучающие материалы на официальном сайте</li>
	  		<li>Полная информация по API модулей</li>
	  		<li><a href="https://tutsplus.com/course/modern-testing-in-php-with-codeception/">И даже видеокурс</a></li>
	  	</ul>
	  </div>	  	
	  </section> 	  	 

	  <section class="slide">
	   	<div class="section">
	   		<h2>Codeception 2.0</h2>
	   	</div>
	   </section> 

	  <section class="slide">
	  	<div><h2>Принципы</h2>
		<ul>
			<li class="next">Работает? - не трожь</li>
			<li class="next">Сложно? - упорсти</li>
			<li class="next">Не нужно? - убери</li>
		</ul>
	  	</div>
	  </section>

	  <section class="slide">
	  	<div><h2>Нововведения</h2>
		<ul>
			<li>PHP 5.4, PHPUnit 4.x, Guzzle 4.x</li>
			<li>Guy => Tester</li>
			<li>Расширение для перезапуска упавших тестов</li>
			<li>Friends для мультимессионного тестирования</li>
			<li>Паралельный запуск тестов</li>
		</ul>
	  	</div>
	  </section>

	  <section class="slide">
	  	<div><h2>Паралельный запуск тестов</h2>
		<ul>
			<li>Разбиваем тесты на группы</li>
			<li>Выполняем тесты в X паралельных процессах</li>
			<li>Обьединяем результаты</li>
		</ul>
	  	</div>
	  </section>

	  <section class="slide">
	  	<div><h2>Паралельный запуск тестов</h2>
		<ul>
			<li>Используем <a href="https://robo.li">Robo</a> task runner <a href="https://robo.li">https://robo.li</a></li>
			<li>Подключаем таски из <code>codeception/robo-paracept</code></li>
			<li>Реализуем тестирование под свой проект</li>
		</ul>
	  	</div>
	  </section>


	    <section class="slide">
	      <div>
	        <h2>Codeception это...</h2>
	        <ul>
	        	<li class="next">мультиформатный фреймворк для тестирования</li>
	        	<li class="next">использует возможности РНРUnit</li>
	        	<li class="next"><strong>набор модулей</strong> для тестирования веб приложений</li>
	        	<li class="next">open-source проект с лицензией MIT</li>
	        	<li class="next">спонсируется компанией 2Amigos</li>
	        </ul>
	      </div>
	    </section>    

	        <section class="slide">
	          <div>
	            <h2>Спасибо за внимание</h2>
	            <ol>
	            	<li>Михаил Боднарчук, автор</li>
	            	<li>Мой скайп: davert.ua</li>
	            	<li>Cайт проекта: <a href="https://codeception.com">codeception.com</a></li>
	            	<li>И его twitter: @codeception</li>
	            	<li>&COPY; &lt;?= date('Y') ?></li>
	            </ol>
	            
	          </div>
	        </section>    

	<!--
		To hide progress bar from entire presentation
		just remove “progress” element.
		-->
	<div class="progress"><div></div></div>
	<script src="shower/shower.min.js"></script>
	<!-- Copyright © 2013 Yours Truly, Famous Inc. -->
</body>
</html>